/**
 * angular-mimetype - An angular plugin to check the mimetype of a given String/Base64/ArrayBuffer
 * @version v0.0.4
 * @author Matteo Gaggiano <m.gaggiano@marchrius.org> (https://marchrius.org/blog)
 * @link https://marchrius.org/blog
 * @maintainers
 * 
 * @license MIT
 */
var tableStr,table;!function(){"use strict";angular.module("mg.mimetype",["mg.mimetype.factories","mg.mimetype.filters","mg.mimetype.directives","mg.mimetype.constants"])}(),function(){"use strict";angular.module("mg.mimetype.constants",[])}(),function(){"use strict";angular.module("mg.mimetype.directives",[])}(),function(){"use strict";angular.module("mg.mimetype.factories",["mg.mimetype.utils","mg.mimetype.constants"])}(),function(){"use strict";angular.module("mg.mimetype.filters",["mg.mimetype.factories"])}(),function(){"use strict";angular.module("mg.mimetype.utils",[])}(),function(){"use strict";angular.module("mg.mimetype.constants").constant("fileType",{iVBORw0KGgo:{regex:"^89504E470D0A1A0A",name:"png",type:"image/png",offset:"0"},"/9j/":[{regex:"^FFD8FFDB",name:"jpeg",type:"image/jpeg",offset:"0"},{regex:"^FFD8FFE0[0-9a-fA-F]{4}4A4649460001",name:"jfif",type:"image/jpeg",offset:"0"},{regex:"^FFD8FFE1[0-9a-fA-F]{4}457869660000",name:"exif",type:"image/jpeg",offset:"0"}],JVBERg:{regex:"^25504446",name:"pdf",type:"application/pdf",offset:"0"},R0lGOD:[{regex:"^474946383761",name:"gif",type:"image/gif",offset:"0"},{regex:"^474946383961",name:"gif",type:"image/gif",offset:"0"}],SUkqAA:{regex:"^49492A00",name:"",type:"image/tiff",offset:"0"},TU0AKg:{regex:"^4D4D002A",name:"",type:"image/tiff",offset:"0"},AAABAA:{regex:"^00000100",name:"ico",type:"image/ico",offset:"0"},OEJQUw:{regex:"",name:"psd",type:"",offset:""}})}(),function(){"use strict";function e(f,m){var e={},g="".toString();function t(e){if(angular.isUndefined(e))return g;var t,r,n=null;for(var i in m)if(f.hop(m,i)&&e.startsWith(i))if(n=m[i],angular.isArray(n)){for(var a=0,o=n.length;a<o;a++)if(t=e.substr(0,255),r=f.base64ToHex(t,!1).toUpperCase(),u(n[a].regex,r))return n[a].type}else if(t=e.substr(0,255),r=f.base64ToHex(t,!1).toUpperCase(),u(n.regex,r))return n.type;return g}function u(e,t){return new RegExp(e).test(t)}return e.fromString=t,e.fromArrayBuffer=function(e){return fromArrayBuffer(e)},e.fromBlob=function(e){return fromBlob(e)},e.fromAuto=function(e){return e instanceof ArrayBuffer?fromArrayBuffer(e):e instanceof Blob?fromBlob(e):(String,t(e))},e}angular.module("mg.mimetype.factories").factory("mimeType",e),e.$inject=["$util","fileType"]}(),function(){"use strict";angular.module("mg.mimetype.utils").service("$util",function(){var e={};return e.hexToBase64=function(e){return btoa(String.fromCharCode.apply(null,e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))},e.base64ToHex=function(e,t){t=!!t;for(var r=0,n=atob(e.replace(/[ \r\n]+$/,"")),i=[];r<n.length;++r){var a=n.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),i[i.length]=a}return i.join(t?" ":"")},e.hop=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},e})}(),function(){"use strict";function e(e){return function(){return e.fromAuto.apply(e,arguments)}}angular.module("mg.mimetype.filters").filter("mimetype",e),e.$inject=["mimeType"]}(),window.atob||(table=(tableStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").split(""),window.atob=function(e){if(/(=[^=]+|={3,})$/.test(e))throw new Error("String contains an invalid character");var t=3&(e=e.replace(/=/g,"")).length;if(1==t)throw new Error("String contains an invalid character");for(var r=0,n=0,i=e.length/4,a=[];r<i;++r){var o=tableStr.indexOf(e[n++]||"A"),f=tableStr.indexOf(e[n++]||"A"),m=tableStr.indexOf(e[n++]||"A"),g=tableStr.indexOf(e[n++]||"A");if((o|f|m|g)<0)throw new Error("String contains an invalid character");a[a.length]=255&(o<<2|f>>4),a[a.length]=255&(f<<4|m>>2),a[a.length]=255&(m<<6|g)}return String.fromCharCode.apply(null,a).substr(0,a.length+t-4)},window.btoa=function(e){for(var t=0,r=0,n=e.length/3,i=[];t<n;++t){var a=e.charCodeAt(r++),o=e.charCodeAt(r++),f=e.charCodeAt(r++);if(255<(a|o|f))throw new Error("String contains an invalid character");i[i.length]=table[a>>2]+table[a<<4&63|o>>4]+(isNaN(o)?"=":table[o<<2&63|f>>6])+(isNaN(o+f)?"=":table[63&f])}return i.join("")}),String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.indexOf(e)});